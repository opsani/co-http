---

#apiVersion: apps/v1
apiVersion: extensions/v1beta1
kind: Deployment

metadata:
  name: debug
  labels:
    comp: debug
    optune.ai/exclude: '1'  # don't tune debugger

spec:
  replicas: 1
  selector:
    matchLabels:
      comp: debug
  template:
    metadata:
      labels:
        comp: debug
    spec:
      containers:
      - name: debug
        # image: 424617791587.dkr.ecr.us-west-2.amazonaws.com/opsani/debugging-web:latest
        image: ubuntu:latest
        command: ["/bin/bash"]
        args: ["-c", "i=0; while [ 1 ]; do echo \"up for $i minutes\"; i=$((i+1)); sleep 60; done"]
        resources:
          limits:
            cpu: 250m
            memory: 256Mi
